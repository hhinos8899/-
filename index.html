<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>私人百家乐AI预测系统</title>
  <style>
    body { background-color:#f0f0f0; font-family:Arial,sans-serif; margin:0; padding:0; }
    .login-container { max-width:400px; margin:100px auto; padding:20px; background:white; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }
    .main-container { display:block; max-width:1000px; margin:0 auto; padding:20px; }
    .grid-container { display:flex; flex-direction:row; gap:5px; padding:15px; background-color:#d9d9d9; border-radius:5px; margin-bottom:20px; }
    .column { display:flex; flex-direction:column; gap:5px; }
    .cell { width:50px; height:50px; background-color:white; border:1px solid #999; display:flex; flex-direction:column; justify-content:center; align-items:center; position:relative; cursor:pointer; user-select:none; }
    .cell.B { color:red; }
    .cell.P { color:blue; }
    .prediction-text { font-size:10px; color:#f5222d; position:absolute; bottom:2px; width:100%; text-align:center; }
    .main-result { font-size:20px; font-weight:bold; z-index:1; }
    .button-group { display:flex; gap:10px; margin-top:20px; justify-content:center; }
    button { padding:8px 15px; font-size:16px; border-radius:4px; cursor:pointer; border:none; }
    #btn-b { background-color:red; color:white; }
    #btn-p { background-color:blue; color:white; }
    #btn-clear, #btn-back { background-color:gray; color:white; }
    .counter { font-size:18px; margin-top:15px; text-align:center; font-weight:bold; }
    h1 { text-align:center; font-size:24px; margin-bottom:20px; }
    .instructions { margin-top:20px; padding:15px; background-color:#f8f8f8; border-radius:5px; }
  </style>
</head>

<body>
  <div id="main-container" class="main-container">
    <h1>私人百家乐AI预测系统</h1>
    <div class="grid-container"></div>
    <div class="counter">已输入: <span id="input-count">0</span> 局</div>
    <div class="button-group">
      <button id="btn-b">B (庄)</button>
      <button id="btn-p">P (闲)</button>
      <button id="btn-clear">清除</button>
      <button id="btn-back">退格</button>
    </div>
    <div class="instructions">
      <h2>操作说明:</h2>
      <p>1. 点击B(庄)或P(闲)按钮输入结果</p>
      <p>2. 系统将在第6、9、12、15、18、21、24、27、30、33、36、39、42、45、48、51、54、57、60局进行预测显示</p>
      <p>3. 主结果显示在格子中央（大字体），预测结果显示在格子下方（小字体）</p>
    </div>
  </div>

  <script>
    // ✅ 你的触发点（19个）：输入5把后预测第6把，因此写 6/9/12/.../60
    const predictionRounds = [6, 9, 12, 15, 18, 21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60];

    // ✅ 19 套规则（按你手写）
    const RULES = [
      // 6
      ({a,b}) => a==="B"&&b==="P"?"P":a==="B"&&b==="B"?"B":a==="P"&&b==="B"?"P":"B",
      // 9
      ({a,b}) => a==="B"&&b==="P"?"B":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
      // 12
      ({a,b}) => a==="B"&&b==="P"?"B":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
      // 15
      ({a,b}) => a==="B"&&b==="P"?"P":a==="B"&&b==="B"?"B":a==="P"&&b==="B"?"P":"B",
      // 18
      ({a,b}) => a==="B"&&b==="P"?"B":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
      // 21
      ({a,b}) => a==="B"&&b==="P"?"B":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
      // 24
      ({a,b}) => a==="B"&&b==="P"?"P":a==="B"&&b==="B"?"B":a==="P"&&b==="B"?"P":"B",
      // 27
      ({a,b}) => a==="B"&&b==="P"?"B":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
      // 30
      ({a,b}) => a==="B"&&b==="P"?"P":a==="B"&&b==="B"?"B":a==="P"&&b==="B"?"P":"B",
      // 33
      ({a,b}) => a==="B"&&b==="P"?"B":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
      // 36
      ({a,b}) => a==="B"&&b==="P"?"P":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
      // 39
      ({a,b}) => a==="B"&&b==="P"?"P":a==="B"&&b==="B"?"B":a==="P"&&b==="B"?"P":"B",
      // 42
      ({a,b}) => a==="B"&&b==="P"?"B":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
      // 45
      ({a,b}) => a==="B"&&b==="P"?"B":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
      // 48
      ({a,b}) => a==="B"&&b==="P"?"P":a==="B"&&b==="B"?"B":a==="P"&&b==="B"?"P":"B",
      // 51
      ({a,b}) => a==="B"&&b==="P"?"B":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
      // 54
      ({a,b}) => a==="B"&&b==="P"?"P":a==="B"&&b==="B"?"B":a==="P"&&b==="B"?"P":"B",
      // 57
      ({a,b}) => a==="B"&&b==="P"?"B":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
      // 60
      ({a,b}) => a==="B"&&b==="P"?"B":a==="B"&&b==="B"?"P":a==="P"&&b==="B"?"B":"P",
    ];

    document.addEventListener('DOMContentLoaded', () => {
      initializeGrid();
      document.getElementById('btn-b').addEventListener('click', () => addResult('B'));
      document.getElementById('btn-p').addEventListener('click', () => addResult('P'));
      document.getElementById('btn-clear').addEventListener('click', clearAll);
      document.getElementById('btn-back').addEventListener('click', removeLast);
    });

    function initializeGrid() {
      const gridContainer = document.querySelector('.grid-container');
      gridContainer.innerHTML = '';

      for (let i = 0; i < 10; i++) {
        const column = document.createElement('div');
        column.className = 'column';
        for (let j = 0; j < 6; j++) {
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.dataset.index = (i * 6 + j).toString();

          const mainResult = document.createElement('div');
          mainResult.className = 'main-result';
          cell.appendChild(mainResult);

          const predictionText = document.createElement('div');
          predictionText.className = 'prediction-text';
          cell.appendChild(predictionText);

          column.appendChild(cell);
        }
        gridContainer.appendChild(column);
      }

      window.results = [];
      window.predMap = {};
      updateGrid();
    }

    function addResult(type) {
      if (window.results.length >= 60) return;
      window.results.push(type);
      updateGrid();
      maybeWritePrediction();
    }

    function updateGrid() {
      const cells = document.querySelectorAll('.cell');
      cells.forEach(cell => {
        const index = parseInt(cell.dataset.index, 10);
        const mainResult = cell.querySelector('.main-result');
        const predictionText = cell.querySelector('.prediction-text');

        if (index < window.results.length) {
          cell.className = 'cell ' + window.results[index];
          mainResult.textContent = window.results[index];
        } else {
          cell.className = 'cell';
          mainResult.textContent = '';
        }

        predictionText.textContent = window.predMap[index] || '';
      });

      document.getElementById('input-count').textContent = window.results.length;
    }

    function clearAll() {
      window.results = [];
      window.predMap = {};
      updateGrid();
    }

    function removeLast() {
      if (window.results.length === 0) return;

      window.results.pop();

      for (let i = window.results.length; i < 60; i++) {
        delete window.predMap[i];
      }

      updateGrid();
      maybeWritePrediction();
    }

    function last2BP() {
      const bp = window.results.filter(x => x === 'B' || x === 'P');
      if (bp.length < 2) return null;
      return bp.slice(-2);
    }

    // ✅ 输入5把后开始预测第6把
    function maybeWritePrediction() {
      if (window.results.length < 5) return; // ✅ 改这里：原来是 <6

      const nextRound = window.results.length + 1; // 预测第6/9/12...把
      const ruleIndex = predictionRounds.indexOf(nextRound);
      if (ruleIndex < 0) return;

      const l2 = last2BP();
      if (!l2) return;

      const p = RULES[ruleIndex]({ a: l2[0], b: l2[1] });
      const cellIndex = window.results.length; // 下一格（第6把预测显示在第6格）

      if (!window.predMap[cellIndex]) {
        window.predMap[cellIndex] = `预测:${p}`;
        updateGrid();
      }
    }
  </script>

  <div style="text-align:center; margin-top:20px; color:#888; font-size:14pt;">
    以上内容由AI搜集并生成，仅供参考
  </div>
</body>
</html>
